<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Master Interview Prep: React + DSA</title>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React (UMD) -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      :root {
        --bg-dark: #0f172a;
        --card-dark: #1e293b;
        --accent: #3b82f6;
        --text-main: #e2e8f0;
        --text-muted: #94a3b8;
      }
      body {
        background-color: var(--bg-dark);
        color: var(--text-main);
        font-family: "Inter", system-ui, -apple-system, sans-serif;
        margin: 0;
        padding: 0;
      }

      .nav-container {
        background: rgba(30, 41, 59, 0.8);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.06);
        position: sticky;
        top: 0;
        z-index: 50;
        padding: 1rem;
      }

      .tab-btn {
        padding: 8px 18px;
        border-radius: 8px;
        font-weight: 600;
        transition: all 0.15s;
        border: 1px solid transparent;
        cursor: pointer;
      }
      .tab-btn.active {
        background-color: var(--accent);
        color: white;
        box-shadow: 0 0 15px rgba(59, 130, 246, 0.32);
      }
      .tab-btn.inactive {
        color: var(--text-muted);
        border: 1px solid rgba(255,255,255,0.04);
      }
      .tab-btn.inactive:hover { background: rgba(255,255,255,0.03); color: white; }

      .view-section { display: none; }
      .view-section.active { display: block; }

      .card-hover { transition: box-shadow .18s, transform .15s, border-color .15s; }
      .card-hover:hover { box-shadow: 0 10px 28px rgba(59,130,246,0.12); transform: translateY(-2px); border-color: #3b82f6; }

      .dsa-card {
        background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
        border: 1px solid rgba(255,255,255,0.06);
        box-shadow: 0 6px 20px rgba(0,0,0,0.32);
      }

      .dryrun-step { background: rgba(255,255,255,0.03); border-left: 3px solid var(--accent); padding: .5rem; border-radius: .25rem; }
      .dark-select {
        appearance: none;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2394a3b8' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
        background-position: right .6rem center;
        background-repeat: no-repeat;
        background-size: 1.2rem 1.2rem;
      }
      pre.code-block { white-space: pre-wrap; word-break: break-word; }
    </style>
  </head>

  <body class="min-h-screen">
    <!-- NAV -->
    <nav class="nav-container">
      <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
        <h1 id="site-title" class="text-xl font-bold text-blue-400 flex items-center gap-2 cursor-pointer select-none">
          <span>üöÄ</span>
          <span>Fullstack Prep Hub</span>
        </h1>

        <div class="flex gap-3">
          <button id="tab-react" onclick="switchTab('react')" class="tab-btn active">React & JS</button>
          <button id="tab-dsa" onclick="switchTab('dsa')" class="tab-btn inactive">DSA Cheatsheet</button>
        </div>
      </div>
    </nav>

    <!-- MAIN CONTAINERS -->
    <main class="max-w-7xl mx-auto p-5">
      <!-- React view -->
      <section id="view-react" class="view-section active p-4 md:p-6">
        <div id="react-root"></div>
      </section>

      <!-- DSA view -->
      <section id="view-dsa" class="view-section p-4 md:p-6">
        <header class="mb-6">
          <h2 class="text-3xl font-bold text-white mb-2">üß† Algorithms & Complexity</h2>
          <p class="text-gray-400">Fast reference for algorithms, edge cases, and dry runs.</p>
        </header>
        <div id="dsa-root"></div>
      </section>
    </main>

    <!-- data.js must define reactQuestionsData and dsaAlgorithms -->
    <script src="data.js"></script>

    <!-- React apps (Babel) -->
    <script type="text/babel">
      const { useState, useMemo, useEffect } = React;

      /* ------------------------------
         Shared CodeBlock Component
         (used by both React and DSA details)
      -------------------------------*/
      const CodeBlock = ({ codeString = "", output = null, isExplanation = false, language = "javascript" }) => {
        const [isDark, setIsDark] = useState(true);

        const theme = isDark
          ? { bg: "bg-slate-900 border-gray-700", text: "text-blue-100", header: "bg-slate-800 border-gray-700", btn: "border-gray-600 text-white hover:bg-gray-600"}
          : { bg: "bg-slate-100 border-gray-300", text: "text-gray-900", header: "bg-gray-200 border-gray-300", btn: "border-gray-400 text-gray-800 hover:bg-gray-300"};

        const handleCopy = () => {
          navigator.clipboard.writeText(codeString || output || "");
          // small non-blocking toast can be added
        };

        return (
          <div className={`${theme.bg} rounded-lg overflow-hidden my-4 shadow-lg border transition-colors duration-200`}>
            <div className={`${theme.header} flex justify-between items-center px-4 py-2 border-b text-sm`}>
              <span className={`font-mono uppercase ${isDark ? "text-gray-400" : "text-gray-600"}`}>{isExplanation ? "TEXT" : language}</span>
              <div className="flex space-x-2">
                <button onClick={handleCopy} className={`px-2 py-1 text-xs rounded border ${theme.btn}`}>üìã Copy</button>
                <button onClick={() => setIsDark(!isDark)} className={`px-2 py-1 text-xs rounded border ${theme.btn}`}>{isDark ? "üåû Light" : "üåô Dark"}</button>
              </div>
            </div>

            {codeString && (
              <pre className={`p-4 overflow-x-auto text-sm leading-relaxed ${theme.text} code-block`}><code>{codeString.trim()}</code></pre>
            )}

            {output && (
              <div className={`p-3 border-t ${isDark ? "border-gray-700 bg-black/30" : "border-gray-300 bg-gray-50"}`}>
                <strong className={`block text-xs font-bold mb-1 ${isDark ? "text-green-400" : "text-green-700"}`}>Console Output:</strong>
                <pre className={`text-xs font-mono ${isDark ? "text-gray-400" : "text-gray-700"}`}>{output}</pre>
              </div>
            )}
          </div>
        );
      };

      /* ------------------------------
         REACT QUESTIONS APP (full filter UI)
      -------------------------------*/
      const QuestionCard = ({ q, onClick }) => (
        <div onClick={() => onClick(q)} className="card-hover bg-[#1e293b] border border-gray-700 rounded-xl p-5 flex flex-col h-full justify-between cursor-pointer">
          <div>
            <div className="flex justify-between items-start mb-2">
              <span className="text-xs text-gray-500 font-mono">ID: {q.id}</span>
            </div>
            <h3 className="text-lg font-bold text-white mb-2">{q.title}</h3>
            <p className="text-sm text-gray-400 line-clamp-2">{q.explanation}</p>
          </div>

          <div className="pt-3 border-t border-gray-700 text-xs text-gray-500 font-mono">
            <span className=" font-semibold">Category:</span> <span className="text-blue-400 font-bold">{q.category}</span>
          </div>
        </div>
      );

      const QuestionDetail = ({ question, onBack }) => (
        <div className="p-6 md:p-8 bg-[#1e293b] rounded-xl shadow-2xl border border-gray-700">
          <button onClick={onBack} className="mb-6 text-blue-400 hover:text-blue-300 font-semibold flex items-center">‚Üê Back to List</button>

          <div className="border-b border-gray-700 pb-4 mb-6">
            <h1 className="text-3xl font-extrabold text-white mb-2">Q{question.id}: {question.title}</h1>
            <span className="bg-blue-900/30 text-blue-400 px-2 py-1 rounded text-sm font-mono">{question.category}</span>
          </div>

          <h3 className="text-xl font-semibold text-white mt-4 mb-2 flex items-center gap-2">üìù Explanation</h3>
          <CodeBlock codeString={question.explanation} isExplanation={true} />

          <h3 className="text-xl font-semibold text-white mt-6 mb-2 flex items-center gap-2">üí° Interview Tips</h3>
          <CodeBlock codeString={question.tips} isExplanation={true} />

          <h3 className="text-xl font-semibold text-white mt-6 mb-2 flex items-center gap-2">üíª Code Snippet</h3>
          <CodeBlock codeString={question.codeString} />

          {question.output && (
            <>
              <h3 className="text-xl font-semibold text-white mt-6 mb-2 flex items-center gap-2">‚úÖ Expected Output</h3>
              <CodeBlock output={question.output} />
            </>
          )}
        </div>
      );

      const ReactApp = () => {
        const [search, setSearch] = useState("");
        const [selectedTitle, setSelectedTitle] = useState("All");
        const [selectedCategory, setSelectedCategory] = useState("All");
        const [sortBy, setSortBy] = useState("id");
        const [sortOrder, setSortOrder] = useState("asc");
        const [selectedQuestion, setSelectedQuestion] = useState(null);

        // derive categories & titles
        const categories = useMemo(() => ["All", ...new Set(reactQuestionsData.map(q=>q.category))], []);
        const titles = useMemo(()=> ["All", ...reactQuestionsData.map(q=>q.title).sort()], []);

        const filteredData = useMemo(() => {
          let data = reactQuestionsData.filter((q) => {
            const term = search.toLowerCase();
            const matchSearch = q.title.toLowerCase().includes(term) || q.explanation.toLowerCase().includes(term);
            const matchCat = selectedCategory === "All" || q.category === selectedCategory;
            const matchTitle = selectedTitle === "All" || q.title === selectedTitle;
            return matchSearch && matchCat && matchTitle;
          });

          return data.sort((a,b) => {
            let valA = a[sortBy], valB = b[sortBy];
            if (typeof valA === "string") { valA = valA.toLowerCase(); valB = valB.toLowerCase(); if (valA < valB) return sortOrder === "asc" ? -1 : 1; if (valA > valB) return sortOrder === "asc" ? 1 : -1; return 0; }
            return sortOrder === "asc" ? valA - valB : valB - valA;
          });
        }, [search, selectedTitle, selectedCategory, sortBy, sortOrder]);

        const handleReset = () => {
          setSearch(""); setSelectedTitle("All"); setSelectedCategory("All"); setSortBy("id"); setSortOrder("asc"); setSelectedQuestion(null);
        };

        // listen to reset-all event
        useEffect(() => {
          const handler = () => handleReset();
          window.addEventListener("reset-all", handler);
          return () => window.removeEventListener("reset-all", handler);
        }, []);

        if (selectedQuestion) return <QuestionDetail question={selectedQuestion} onBack={() => setSelectedQuestion(null)} />;

        return (
          <div>
            <header className="mb-6 md:mb-8">
              <h2 className="text-3xl font-bold text-blue-400 mb-2">‚öõÔ∏è React Concepts</h2>
              <p className="text-gray-400">Frontend logic, Hooks, and Lifecycle deep dives.</p>
            </header>

            {/* Filter Bar */}
            <div className="bg-slate-800/50 p-5 rounded-xl border border-slate-700 shadow-lg mb-6">
              <div className="mb-4 relative">
                <span className="absolute left-3 top-3 text-gray-500">üîç</span>
                <input placeholder="Search keywords..." value={search} onChange={(e)=>setSearch(e.target.value)} className="w-full bg-slate-900 border border-slate-700 text-white py-2 pl-10 pr-4 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" />
              </div>

              <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-3">
                <div className="flex flex-col">
                  <label className="text-xs text-gray-400 mb-1 ml-1">Category</label>
                  <select value={selectedCategory} onChange={(e)=>setSelectedCategory(e.target.value)} className="dark-select bg-slate-900 border border-slate-700 text-white py-2 px-3 rounded-lg text-sm">
                    {categories.map(c=> <option key={c} value={c}>{c}</option>)}
                  </select>
                </div>

                <div className="flex flex-col">
                  <label className="text-xs text-gray-400 mb-1 ml-1">Specific Title</label>
                  <select value={selectedTitle} onChange={(e)=>setSelectedTitle(e.target.value)} className="dark-select bg-slate-900 border border-slate-700 text-white py-2 px-3 rounded-lg text-sm">
                    {titles.map(t => <option key={t} value={t}>{t.length>40 ? t.slice(0,40) + "..." : t}</option>)}
                  </select>
                </div>

                <div className="flex flex-col">
                  <label className="text-xs text-gray-400 mb-1 ml-1">Sort By</label>
                  <select value={sortBy} onChange={(e)=>setSortBy(e.target.value)} className="dark-select bg-slate-900 border border-slate-700 text-white py-2 px-3 rounded-lg text-sm">
                    <option value="id">ID</option>
                    <option value="title">Title</option>
                  </select>
                </div>

                <div className="flex flex-col">
                  <label className="text-xs text-gray-400 mb-1 ml-1">Order</label>
                  <select value={sortOrder} onChange={(e)=>setSortOrder(e.target.value)} className="dark-select bg-slate-900 border border-slate-700 text-white py-2 px-3 rounded-lg text-sm">
                    <option value="asc">Ascending</option>
                    <option value="desc">Descending</option>
                  </select>
                </div>

                <div className="flex flex-col justify-end">
                  <button onClick={handleReset} className="w-full bg-red-600/80 hover:bg-red-600 text-white py-2 rounded-lg font-bold text-sm transition">üîÑ Reset</button>
                </div>
              </div>
            </div>

            <p className="text-gray-400 mb-4 text-sm">Showing <span className="text-white font-bold">{filteredData.length}</span> result(s)</p>

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-10">
              {filteredData.length>0 ? filteredData.map(q => (
                <QuestionCard key={q.id} q={q} onClick={(q)=>setSelectedQuestion(q)} />
              )) : (
                <div className="col-span-full p-8 text-center border-2 border-dashed border-gray-700 rounded-xl text-gray-500 font-medium">No matching questions found. Try resetting filters.</div>
              )}
            </div>
          </div>
        );
      };

      /* ------------------------------
         DSA React App (converted)
      -------------------------------*/
      const DsaCard = ({ item, onSelect }) => (
        <div onClick={() => onSelect(item)} className="dsa-card rounded-xl p-5 flex flex-col justify-between hover:border-blue-500/50 transition cursor-pointer">
          <div>
            <div className="flex justify-between items-start mb-2">
              <span title={item.category} className="text-xs font-mono text-blue-400 bg-blue-900/20 px-2 py-1 rounded truncate max-w-[150px]">{item.category}</span>
              <span className="text-xs text-gray-500">ID: {item.id}</span>
            </div>
            <h3 className="text-lg font-bold text-white mb-2">{item.title}</h3>
            <p className="text-gray-400 text-sm line-clamp-2">{item.algorithm}</p>
          </div>
          <div className="mt-4 pt-4 border-t border-gray-700 flex justify-between items-center text-xs text-gray-500 font-mono">
            <span>‚è± {item.timeComplexity}</span>
            <span>üíæ {item.spaceComplexity}</span>
          </div>
        </div>
      );

      const DsaDetail = ({ item, onBack }) => (
        <div className="bg-[#1e293b] rounded-xl shadow-2xl border border-gray-700 p-6 md:p-8">
          <button onClick={onBack} className="mb-6 flex items-center text-blue-400 hover:text-blue-300 transition text-sm font-semibold">‚Üê Back to List</button>

          <div className="border-b border-gray-700 pb-6 mb-6">
            <h1 className="text-3xl font-bold text-white mb-2">{item.title}</h1>
            <div className="flex gap-4 text-sm font-mono text-gray-400">
              <span className="bg-blue-900/20 text-blue-400 px-2 py-1 rounded">{item.category}</span>
              <span>‚è± {item.timeComplexity}</span>
              <span>üíæ {item.spaceComplexity}</span>
            </div>
          </div>

          <div className="grid lg:grid-cols-3 gap-8">
            <div className="lg:col-span-2 space-y-6">
              <section>
                <h3 className="text-lg font-semibold text-white mb-2">Algorithm Logic</h3>
                <p className="text-gray-300 leading-relaxed">{item.algorithm}</p>
              </section>

              <section>
                <h3 className="text-lg font-semibold text-white mb-2">Dry Run</h3>
                <div className="space-y-2 text-sm font-mono text-gray-300">
                  {item.dryRun.map((s,i)=> <div key={i} className="dryrun-step p-2 rounded mb-1">{s}</div>)}
                </div>
              </section>

              <section className="grid sm:grid-cols-2 gap-4">
                <div className="bg-red-900/10 border border-red-900/30 p-4 rounded-lg">
                  <h4 className="text-red-400 font-bold mb-2 text-sm uppercase">Edge Cases</h4>
                  <ul className="list-disc pl-4 text-gray-400 text-sm space-y-1">{item.edgeCases.map((e,i)=> <li key={i}>{e}</li>)}</ul>
                </div>

                <div className="bg-yellow-900/10 border border-yellow-900/30 p-4 rounded-lg">
                  <h4 className="text-yellow-400 font-bold mb-2 text-sm uppercase">Interview Tips</h4>
                  <ul className="list-disc pl-4 text-gray-400 text-sm space-y-1">{item.tips.map((t,i)=> <li key={i}>{t}</li>)}</ul>
                </div>
              </section>
            </div>

            <div>
              <div className="sticky top-4">
                <div className="flex justify-between items-center mb-2">
                  <h3 className="font-semibold text-white">Implementation</h3>
                  <button onClick={() => navigator.clipboard.writeText(item.code)} className="text-xs bg-blue-600 hover:bg-blue-500 text-white px-2 py-1 rounded transition">Copy</button>
                </div>
                <div className="bg-gray-900 rounded-lg overflow-hidden border border-gray-700">
                  <pre className="p-4 text-xs text-blue-100 overflow-x-auto whitespace-pre font-mono">{item.code}</pre>
                </div>

                <div className="mt-4 space-y-2 text-sm">
                  <div className="flex justify-between border-b border-slate-800 pb-2">
                    <span className="text-gray-500">Time Complexity</span>
                    <span className="text-blue-400 font-mono">{item.timeComplexity}</span>
                  </div>
                  <div className="flex justify-between border-b border-slate-800 pb-2">
                    <span className="text-gray-500">Space Complexity</span>
                    <span className="text-green-400 font-mono">{item.spaceComplexity}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      );

      const DSAApp = () => {
        const [search, setSearch] = useState("");
        const [category, setCategory] = useState("All");
        const [selected, setSelected] = useState(null);

        const categories = useMemo(() => ["All", ...new Set(dsaAlgorithms.map(a=>a.category))], []);

        const filtered = useMemo(() => {
          const t = search.toLowerCase();
          return dsaAlgorithms.filter(item => {
            const matchesSearch = item.title.toLowerCase().includes(t) || item.algorithm.toLowerCase().includes(t);
            const matchesCat = category === "All" || item.category === category;
            return matchesSearch && matchesCat;
          });
        }, [search, category]);

        // listen to reset-all event
        useEffect(() => {
          const handler = () => {
            setSearch(""); setCategory("All"); setSelected(null);
          };
          window.addEventListener("reset-all", handler);
          return () => window.removeEventListener("reset-all", handler);
        }, []);

        if (selected) return <DsaDetail item={selected} onBack={() => setSelected(null)} />;

        return (
          <div>
            <div className="flex flex-wrap gap-3 mb-4 bg-slate-800/50 p-4 rounded-xl border border-slate-700 shadow-lg">
              <input value={search} onChange={(e)=>setSearch(e.target.value)} placeholder="Search algorithms (e.g., 'sort', 'tree')..." className="flex-1 bg-slate-900 border border-slate-700 text-white p-2.5 rounded-lg" />
              <select value={category} onChange={(e)=>setCategory(e.target.value)} className="dark-select bg-slate-900 border border-slate-700 text-white p-2.5 pr-10 rounded-lg">
                {categories.map((c,i)=> <option key={i}>{c}</option>)}
              </select>
              <button onClick={() => { setSearch(''); setCategory('All'); }} className="px-4 py-2 text-gray-300 hover:text-white hover:bg-slate-700 rounded-lg">Reset</button>
            </div>

            <div className="mb-6 text-gray-400 text-sm">Showing <span className="font-bold text-white">{filtered.length}</span> result(s)</div>

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              {filtered.map(item => <DsaCard key={item.id} item={item} onSelect={setSelected} />)}
            </div>
          </div>
        );
      };

      /* ------------------------------
         Mount both apps
      -------------------------------*/
      // sanity checks for data.js
      if (typeof reactQuestionsData === "undefined") {
        console.error("reactQuestionsData not found (data.js).");
      }
      if (typeof dsaAlgorithms === "undefined") {
        console.error("dsaAlgorithms not found (data.js).");
      }

      ReactDOM.createRoot(document.getElementById("react-root")).render(<ReactApp />);
      ReactDOM.createRoot(document.getElementById("dsa-root")).render(<DSAApp />);
    </script>

    <!-- small tab switch & reset integration -->
    <script>
      function switchTab(tab) {
        const r = document.getElementById("view-react");
        const d = document.getElementById("view-dsa");
        const bR = document.getElementById("tab-react");
        const bD = document.getElementById("tab-dsa");

        if (tab === 'react') {
          r.classList.add('active'); d.classList.remove('active');
          bR.classList.add('active'); bR.classList.remove('inactive');
          bD.classList.remove('active'); bD.classList.add('inactive');
        } else {
          d.classList.add('active'); r.classList.remove('active');
          bD.classList.add('active'); bD.classList.remove('inactive');
          bR.classList.remove('active'); bR.classList.add('inactive');
        }
      }

      // Clicking the site title resets both apps and switches to React
      document.getElementById('site-title').addEventListener('click', function () {
        // switch to React tab
        switchTab('react');

        // dispatch an event that React apps listen to
        window.dispatchEvent(new Event('reset-all'));

        // also support older listener style (custom event)
        window.dispatchEvent(new CustomEvent('reset-all'));

        // scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    </script>
  </body>
</html>
